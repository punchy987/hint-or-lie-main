/* Pastilles / KPI */
.kpi{
  min-width:66px; text-align:center; padding:6px 10px; border-radius:8px; border:1px solid var(--line);
  background:#140f1a; font-weight:800; color:#ffeef0; box-shadow: inset 0 0 0 1px #21162b;
}
/* Un poil plus lisible */
.kpi{ border-color: color-mix(in srgb, var(--line) 70%, var(--ink) 30%) }

/* Barre de phase (r√¥le / th√®me / timer) ‚Äî progress pilot√© par --progress */
.phase-bar{
  display:grid; grid-template-columns:1fr minmax(320px,1.6fr) 1fr;
  align-items:center; gap:12px; border:1px solid var(--line);
  border-radius:12px; padding:10px 12px;
  background:linear-gradient(180deg,#1b1422,#14101b);
  box-shadow: inset 0 0 0 1px #21162b; margin-bottom:10px;
  position:relative; overflow:hidden;
  isolation:isolate;            /* contexte d‚Äôempilement local */
}

/* --- PROGRESSION : calque derri√®re tout le contenu --- */
.phase-bar::after{
  content:""; position:absolute; inset:0;
  transform-origin:left center; transform:scaleX(var(--progress,0));
  background: linear-gradient(90deg, rgba(255,168,77,.25), rgba(255,59,59,.25));
  /* IMPORTANT: on enl√®ve le mix-blend pour ne plus ‚Äúteinter‚Äù les pastilles au-dessus */
  mix-blend-mode: normal;
  pointer-events:none; z-index:0;  /* derri√®re */
}

/* Alias sp√©cifiques */
/* Les enfants de .phase-bar (gauche, centre, droite) passent au-dessus du calque de progression (::after) */
.phase-left,.phase-center,.phase-right{ position:relative; z-index:2; }
.phase-left,.phase-center,.phase-right{ min-width:0 } /* accessibilit√© */

/* Barre de progression ind√©pendante (celle du dessous) */
.phase-head{ position:relative; z-index:3 }
.phase-progress{
  position:relative; height:8px; margin-top:.8rem;
  background:rgba(255,255,255,.06); border-radius:999px; overflow:hidden;
  z-index:0;                    /* derri√®re les √©l√©ments interactifs */
  pointer-events:none;          /* ne bloque aucun clic */
}
.phase-progress .bar{
  height:100%; width:calc(var(--progress, 0) * 100%);
  background: linear-gradient(90deg, var(--accent), #ffc28a);
  transition: width .2s linear;
}

/* Flash fin de timer (option) */
@keyframes hol-phase-flash{ 0%{opacity:0} 50%{opacity:.28} 100%{opacity:0} }
.flash-now::after{
  content:""; position:fixed; inset:0; background:#fff; pointer-events:none; animation:hol-phase-flash .24s ease-out;
}

/* Pastille "Manche" compacte */
.pill.s{
  padding:4px 10px; font-size:13px; border-radius:999px;
  border:1px solid var(--line); background:linear-gradient(180deg,#1b1422,#14101b);
  box-shadow: inset 0 0 0 1px #21162b; font-weight:800; color:var(--ink);
  display:inline-flex; align-items:center; gap:6px; white-space:nowrap;
}
.pill.s::before{ content:"üîÅ"; filter: drop-shadow(0 0 10px rgba(255,255,255,.05)) }

/* === Phase bar spacing dans les cartes === */

/* Quand la phase-bar est le 1er √©l√©ment d‚Äôune carte, on m√©nage un petit espace en haut */
.card > .phase-bar:first-child{
  margin-top: 8px;
}

/* Un peu d‚Äôair dessous pour ne pas coller le contenu qui suit */
.phase-bar + *{
  margin-top: 10px;
}
/* Layoutage des zones left/center/right (voir 03-components pour d√©tails) */
.phase-left, .phase-center, .phase-right {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  min-width: 0;
}

/* Alignements */
.phase-left   { justify-content: flex-start; }
.phase-center { justify-content: center; }
.phase-right  { justify-content: flex-end; }

/* Tronquer le texte de la valeur dans la chip */
.theme-chip b {
  display: inline-block;
  max-width: 14ch;      /* ajuste si tu veux plus/moins long */
  overflow: hidden;
  text-overflow: ellipsis;
  vertical-align: bottom;
}

/* petit espace quand plusieurs chips se suivent */
.theme-chip + .theme-chip { margin-left: 6px; }

/* === VOTE : Cartes / Tuiles (g√©r√© par vote.js) === */
#hints {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
  gap: 12px;
  margin-top: 16px;
}

.vote-card {
  appearance: none; -webkit-appearance: none;
  background: linear-gradient(180deg, #1b1422, #14101b);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 16px 10px;
  color: var(--ink);
  font-family: inherit;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  box-shadow: 0 4px 12px rgba(0,0,0,0.2);
  transition: transform 0.1s, border-color 0.2s, box-shadow 0.2s;
  word-break: break-word;
}
.vote-card:hover:not(:disabled) {
  transform: translateY(-2px);
  border-color: var(--accent);
  box-shadow: 0 6px 16px rgba(255,168,77,.15);
}
.vote-card.selected {
  background: var(--accent);
  color: #2a0e16;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(255, 168, 77, 0.3);
  transform: scale(1.02);
  z-index: 1;
}
.vote-card:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  filter: grayscale(0.8);
}
